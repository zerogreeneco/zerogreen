<!DOCTYPE html>
<th:block th:replace="~{basic/basicTemplate :: setContent(~{this::content})}" xmlns:th="http://www.w3.org/1999/xhtml"
          xmlns:sec="http://www.w3.org/1999/xhtml">
    <th:block th:fragment="content">
        <link rel="stylesheet" th:href="@{/bootstrap/css/index/index.css}" />
<!--        <link rel="stylesheet" th:href="@{/bootstrap/css/index/slider.css}" />-->
        <script type="text/javascript" th:src="@{/bootstrap/js/index/loginmodal.js}"></script>
        <script type="text/javascript" th:src="@{/bootstrap/js/index/slider.js}"></script>
<!--        <script th:src="@{https://code.jquery.com/jquery-3.6.0.min.js}"></script>-->
<!--        <script type="text/javascript"-->
<!--                th:src="@{http://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js}"></script>-->

        <script>
            $(function (){
                const slides = document.querySelector('.slider');
                const slideImg = document.querySelectorAll('.shopList-box li');
                let currentIdx = 0;
// index
                console.log("이미지 길이="+ slideImg.length)
                const slideCount = slideImg.length;
                const prev = document.querySelector('.prev');
                const next = document.querySelector('.next');
                const slideWidth = 300;
                const slideMargin = 100;

                let aa = slides.style.width = (slideWidth + slideMargin) * slideCount + "px";
                console.log("aa = " + aa)
                function moveSlide(num) {
                    let s = slides.style.left = -num * 400 + 'px';
                    console.log("S - " + s);
                    currentIdx = num;
                }

                prev.addEventListener('click', function () {
                    console.log(currentIdx);
                    if (currentIdx !== 0) moveSlide(currentIdx - 1);
                });
                next.addEventListener('click', function () {
                    console.log(currentIdx);
                    if (currentIdx !== slideCount - 1) {
                        moveSlide(currentIdx + 1);
                    }
                });
            })
        </script>
        <!--login pop-up-->
        <div sec:authorize="isAnonymous()">
            <div id="popup-wrap">
                <div class="popup">
                    <span id="popup-text">로그인시 추가적인 서비스<br>이용이 가능합니다.</span>
                    <div>
                        <button id="popup-cancle">취소</button>
                        <button id="popup-login" th:onclick="|location.href='@{/login}'|">로그인</button></a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row gtr-200">
            <!--Shop List-->
            <div id="shop-section">
                <span class="cate-title">내 주변 맛집</span>
                <div class="slider">
                    <span class="controller prev">&lang;</span>
                    <ul class="shopList-box">
                        <li>
                            <div class="card">
                                <div class="card-header">
                                    <img src="http://placehold.it/300x300" />
                                </div>
                                <div class="card-body">
                                    <span class="shop-name">가게명1</span>
                                    <span>가게 거리 ?KM</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card">
                                <div class="card-header">
                                    <img src="http://placehold.it/300x300" />
                                </div>
                                <div class="card-body">
                                    <span class="shop-name">가게명2</span>
                                    <span>가게 거리 ?KM</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card">
                                <div class="card-header">
                                    <img src="http://placehold.it/300x300" />
                                </div>
                                <div class="card-body">
                                    <span class="shop-name">가게명3</span>
                                    <span>가게 거리 ?KM</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card">
                                <div class="card-header">
                                    <img src="http://placehold.it/300x300" />
                                </div>
                                <div class="card-body">
                                    <span class="shop-name">가게명4</span>
                                    <span>가게 거리 ?KM</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card">
                                <div class="card-header">
                                    <img src="http://placehold.it/300x300" />
                                </div>
                                <div class="card-body">
                                    <span class="shop-name">가게명5</span>
                                    <span>가게 거리 ?KM</span>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="card">
                                <div class="card-header">
                                    <img src="http://placehold.it/300x300" />
                                </div>
                                <div class="card-body">
                                    <span class="shop-name">가게명6</span>
                                    <span>가게 거리 ?KM</span>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <span class="controller next">&rang;</span>
                </div>
            </div>

            <!--Google Map-->
            <div id="map-section">
                <div id="map"></div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
                integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                crossorigin="anonymous"></script>
        <script th:inline="javascript">
            function goStore(id) {
                //alert('goStore');
                /*[+
                var url = [[@{page/detail}]] +
                    "?id="+id;
                +]*/
                location.href = url;
            }
        </script>

        <!--지도 부분-->
        <script type="text/javascript" th:src="@{/bootstrap/js/map.js}"></script>
        <script type="text/javascript"
                src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=8b90a59d1c1c795a8266f3f47ebfd1ac"></script>
        <div th:each="app : ${approval}">
            <span th:text="${app.storeAddress}"></span><br>
            <span th:text="${app.storeType}"></span><hr>
        </div>
    </th:block>
</th:block>
</html>