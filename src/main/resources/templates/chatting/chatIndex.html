<!DOCTYPE html>
<th:block th:replace="~{basic/basicTemplate :: setContent(~{this::content})}" xmlns:th="http://www.w3.org/1999/xhtml">
    <th:block th:fragment="content">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.1.1/list.min.js"></script>
        <!--    libs for stomp and sockjs-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.4.0/sockjs.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
        <!--    end libs for stomp and sockjs-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet"
              type="text/css">
        <link th:href="@{/bootstrap/css/chat/chat.css}" rel="stylesheet">
        <body>
        <!-- 카테고리 -->
        <input th:value="${user}" hidden>
        <input id="nickname" th:value="${nick}" hidden>
        <input id="myId" th:value="${#authentication.principal.id}" hidden>

        <div class="container1 clearfix">
            <div class="people-list" id="people-list">
                <div class="search">
                    <input id="userName" th:value="${#authentication.principal.username}" placeholder="search"
                           type="text" hidden>
                    <input placeholder="search" type="text" id="userId" >
                    <button onclick="registration()" style="color:black;">Enter</button>
                    <button onclick="fetchAll()" style="color:black;">새로고침</button>
                </div>
                <ul class="list" id="usersList">


                </ul>
            </div>

            <div class="chat">
                <div class="chat-header clearfix">
                    <div class="chat-about">
                        <div class="chat-with" id="selectedUserId"></div>
                    </div>
                </div> <!-- end chat-header -->

                <div class="chat-history">
                    <ul>

                    </ul>

                </div> <!-- end chat-history -->

                <div class="chat-message clearfix">
                        <textarea id="message-to-send" name="message-to-send" placeholder="Type your message"
                                  rows="3"></textarea>
                    <button id="sendBtn">보내기</button>

                </div> <!-- end chat-message -->

            </div> <!-- end chat -->

        </div> <!-- end container -->

        <script id="message-template" type="text/x-handlebars-template">
            <li class="clearfix">
                <div class="message-data align-right">
                    <span class="message-data-time">{{time}}</span> &nbsp; &nbsp;
                    <span class="message-data-name">나</span> <i class="fa fa-circle me"></i>
                </div>
                <div class="message other-message float-right">
                    {{messageOutput}}
                </div>
            </li>
        </script>

        <script id="message-response-template" type="text/x-handlebars-template">
            <li>
                <div class="message-data">
                    <span class="message-data-name" vlaue="{{userName}}" id="testyj"><i class="fa fa-circle online"></i>{{userName}}</span>
                    <span class="message-data-time">{{time}}</span>
                </div>
                <div class="message my-message">
                    {{response}}
                </div>
            </li>
        </script>

        <script th:src="@{/bootstrap/js/chat/custom.js}"></script>
        <script th:src="@{/bootstrap/js/chat/chat.js}"></script>
        </body>
    </th:block>
</th:block>
</html>