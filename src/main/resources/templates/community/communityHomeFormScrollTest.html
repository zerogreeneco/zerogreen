<!DOCTYPE html>
<th:block th:replace="~{basic/basicTemplate :: setContent(~{this::content})}" xmlns:th="http://www.w3.org/1999/xhtml">
    <th:block th:fragment="content">
        <script src="https://unpkg.com/infinite-scroll@4/dist/infinite-scroll.pkgd.min.js"></script>
        <script>
            $(".container").infiniteScroll({
                path: '.pagination__next',
                append: ''
            });

        </script>
        <style>
            .community-container {
                margin: 0 auto;
            }

            /* 카테고리 리스트 */
            ul.category-list {
                text-align: center;
                display: table;
                width: 100%;
                border-bottom: 2px solid #999;
                table-layout: fixed;
            }

            ul.category-list li {
                display: table-cell;
                vertical-align: middle;
                text-align: center;
                font-size: 20px;
                height: 100%;
            }

            .category-container {
                margin: 0 auto;
            }

            #list-wrapper {
                display: table;
                margin: 0 auto;
                border-bottom: solid black 1px;
                width: 700px;
                height: 150px;
                margin-bottom: 10px;
            }

            .cm-content{
                display: table-cell;
                height: 150px;
            }

            /* 리스트 카테고리 */
            .main-list-category {
                margin: 15px 0 10px 0;
            }
            .cm-category {
                display: inline-block;
                border: 1px solid black;
                background-color: #16a085;
                font-size: 0.9em;
                color: #FFF;
                text-decoration: none;
                padding: 4px;
            }

            /* 리스트 텍스트 */
            .main-list-text {
                height: 60px;
                display: block;
                overflow:hidden;
                text-overflow:ellipsis;
            }

            .main-list-text p {
                display: block;
                height: 60px;
            }

            .main-list-text a {
                display: block;
                text-decoration: none;
                color: #000;
                height: 50px;
                width: 500px;
                overflow:hidden;
                text-overflow:ellipsis;
            }

        </style>
        <!--카테고리-->
        <div class="community-container">
            <div class="category-container">
                <ul class="category-list">
                    <li th:each="categories : ${category}" th:value="${categories.name()}">
                        <a th:text="${categories.categoryName}"
                           th:href="@{/community(category=${categories.name()}) }"></a>
                    </li>
                </ul>
                <div sec:authorize="hasAnyRole('ROLE_USER','ROLE_ADMIN')">
                    <button type="button" th:onclick="|location.href='@{/community/write}'|">글쓰기</button>
                </div>
            </div>
            <!-- 리스트 -->
            <template>
                <div id="list-wrapper" th:each="community : ${communityList}">
                    <div class="cm-content">
                        <div class="main-list-category">
                        <span>
                            <a th:href="@{/community(category=${community.category.name()}) }"
                               th:text="${community.category.categoryName}" class="cm-category">카테고리</a>
                        </span>
                        </div>
                        <div class="main-list-text">
                            <p><a th:href="@{/community/read/{boardId}(boardId = ${community.id})}"
                                  th:text="${community.text}">글 내용</a></p>
                        </div>
                        <div class="main-list-nickname" th:text="${community.nickname}">닉네임</div>
                        <div>
                            <span class="main-list-views"><img th:src="@{/bootstrap/images/list/visibility.png}"
                                                               width="17px" height="17px">[[${community.count}]]</span>
                            <span class="main-list-like"><img th:src="@{/bootstrap/images/like/like.png}" width="17px"
                                                              height="17px">[[${community.like}]]</span>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </th:block>
</th:block>
</html>