<!DOCTYPE html>
<th:block th:replace="~{basic/basicTemplate :: setContent(~{this::content})}" xmlns:th="http://www.w3.org/1999/xhtml">
    <th:block th:fragment="content">

        <!-- 페이지 css/ js 추가 -->
        <link th:href="@{/bootstrap/css/page/list.css}" rel="stylesheet"/>
        <!-- 본문 시작 -->
        <!--검색-->
        <div class="form-area">
            <form th:action="@{/food/list}" method="get" id="foodSearchForm">
                <input type="hidden" name="page" value="1">
                <select class="dropdown" name="type">
                    <option>식당 이름</option>
                    <option>메뉴</option>
                </select>
                <div class="search-bar">
                    <input id="search-input" name="keyword">
                    <img class="truncate_icon" th:src="@{/bootstrap/images/list/close.png}"/>
                </div>
                <button class="btn_search">
                    <img class="search_icon" th:src="@{/bootstrap/images/list/search.png}">
                </button>
            </form>
        </div>

            <!-- 사업장 종류 -->
            <div class="listNav">
                <input type="radio" class="form-check-input storeType" id="radio1" name="storeType">
                <label class="form-check-label" for="radio1"
                       th:onclick="|javascript:getFoodList('1')|">전체</label>
              
                <input type="radio" class="form-check-input storeType" id="radio2" name="storeType">
                <label class="form-check-label" for="radio2" value="VEGAN_FOOD"
                       th:onclick="|javascript:getTypeList('VEGAN_FOOD','1')|">비건 음식점</label>

                <input type="radio" class="form-check-input storeType" id="radio3" name="storeType">
                <label class="form-check-label" for="radio3" value="GENERAL_FOOD"
                       th:onclick="|javascript:getTypeList('GENERAL_FOOD','1')|">친환경 포장</label>
            </div>

        <div id="card-align">
            <div class="card" th:each="list : ${list}"
                 th:onclick="|javascript: goStore('${list.id}')|">
                <div class="card-header">
                    <img src="http://placehold.it/300x300"/>
                </div>
                <div class="shopList-box">
                    <div class="card-body">
                        <span class="like"><img class="icon" th:src="@{/bootstrap/images/list/heart.png}"> 1230</span>
                        <span class="shop-name">[[${list.storeName}]]</span>
                        <span><img class="icon"
                                   th:src="@{/bootstrap/images/list/call.png}"> [[${list.storePhoneNumber}]]</span>
                        <span th:if="${list.openTime}==null"><img class="icon"
                                                                  th:src="@{/bootstrap/images/list/clock.png}"> 매장 확인 필요</span>
                        <span th:if="${list.openTime}!=null"><img class="icon"
                                                                  th:src="@{/bootstrap/images/list/clock.png}"> [[${list.openTime}]] ~ [[${list.closeTime}]]</span>
                        <span><img class="icon" th:src="@{/bootstrap/images/list/dish.png}"> 감자뇨끼</span>
                    </div>
                </div>
            </div>

            <script th:inline="javascript">
                //검색
                $('.search_icon').click(function (e) {
                    $('#shopSearchForm').submit();
                });

                //검색어 비우기
                $('.truncate_icon').click(function () {
                    $('#search-input').val('');
                });

                //전체 리스트 이동
                function getFoodList(page) {
                    /*[+
                    const url = [[@{/food/list}]] +
                        "?page=" + page;
                    +]*/

                    location.href = url;
                }

                //카테고리 리스트 이동
                function getTypeList(name, page) {
                    /*[+
                    const url = [[@{/food/list}]] +
                        "?type=" +name + "&page=" + page;
                    +]*/

                    location.href = url;
                }

                //상세 페이지 이동
                function goStore(sno) {
                    /*[+
                    var url = [[@{/page/detail}]] + "/" +sno ;
                    +]*/
                    location.href = url;
                }

            </script>
    </th:block>
</th:block>

